!function(){"use strict";var e=Object.defineProperty;class t{constructor(t){var n;((t,n,r)=>{n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r})(this,"symbol"!=typeof(n="_container")?n+"":n,null),this._container=t}hide(){this._container.classList.add("hidden")}show(){this._container.classList.remove("hidden")}}var n=Object.defineProperty,r=(e,t,r)=>(((e,t,r)=>{t in e?n(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r),s=Object.defineProperty;class a{constructor(e){var t;((e,t,n)=>{t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(this,"symbol"!=typeof(t="_query")?t+"":t,""),this._query=e.replaceAll(" ","+")}getBrands(){return e=this,null,t=function*(){try{let e=1,t=[];for(;;){const n=yield fetch(`https://search.wb.ru/exactmatch/ru/common/v4/search?dest=-1221148,-140294,-1751445,-364763&lang=ru&locale=ru&resultset=catalog&page=${e++}&query=${this._query}`),r=yield n.json();if(0===Object.keys(r).length||0===r.data.products.length)break;const s=r.data.products.map((e=>e.brand));t=t.concat(s)}return[...new Set(t)].filter((e=>""!==e))}catch(e){throw new Error(e.message)}},new Promise(((n,r)=>{var s=e=>{try{i(t.next(e))}catch(e){r(e)}},a=e=>{try{i(t.throw(e))}catch(e){r(e)}},i=e=>e.done?n(e.value):Promise.resolve(e.value).then(s,a);i((t=t.apply(e,null)).next())}));var e,t}}const i=document.getElementById("searchQuery"),l=document.getElementById("brandName"),c=document.querySelector(".button"),d=document.querySelector(".informer"),o=document.querySelector(".brands-container");let h="";const u=new class extends t{constructor(e){super(e),r(this,"_header",null),r(this,"_list",null),r(this,"_brands",[]),r(this,"_selectedBrand",null),this._header=this._container.querySelector(".brands-title"),this._list=this._container.querySelector(".list")}setBrands(e,t){this._brands=e,this._header.innerText=`Рейтинг по запросу: ${t}`,this._list.textContent="",this._selectedBrand=null,this._brands.forEach((e=>{const t=document.createElement("li");t.classList.add("brand"),t.innerText=e,this._list.append(t)}))}selectBrand(e){const t=this._brands.indexOf(e);-1!==t?(this._selectedBrand=this._list.children[t],this._selectedBrand.classList.add("brand-selected")):this._selectedBrand&&(this._selectedBrand.classList.remove("brand-selected"),this._selectedBrand=null)}}(o),y=new class extends t{show(e){this._container.innerText=e,super.show()}}(d);i.addEventListener("input",(e=>h=e.target.value.trim())),l.addEventListener("input",(e=>u.selectBrand(e.target.value.trim()))),c.addEventListener("click",(function(){return e=this,null,t=function*(){u.hide(),y.show("Загрузка данных");const e=new a(h),t=yield e.getBrands();if(0===t.length)return y.show("Список брендов пуст"),void setTimeout((()=>y.hide()),5e3);y.hide(),u.setBrands(t,h),u.show()},new Promise(((n,r)=>{var s=e=>{try{i(t.next(e))}catch(e){r(e)}},a=e=>{try{i(t.throw(e))}catch(e){r(e)}},i=e=>e.done?n(e.value):Promise.resolve(e.value).then(s,a);i((t=t.apply(e,null)).next())}));var e,t}))}();